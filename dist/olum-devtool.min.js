/**
* @name olum-devtool
* @version 0.1.3
* @copyright 2021
* @author Eissa Saber
* @license MIT
*/
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(o="Object"===o&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var DevTool=function(){function e(){_classCallCheck(this,e),_defineProperty(this,"global","undefined"!=typeof self?self:window),_defineProperty(this,"isDown",!1),_defineProperty(this,"isActive",!1),_defineProperty(this,"startX",void 0),_defineProperty(this,"startY",void 0),_defineProperty(this,"currentX",void 0),_defineProperty(this,"currentY",void 0),_defineProperty(this,"walkX",void 0),_defineProperty(this,"walkY",void 0),_defineProperty(this,"logo",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150" fill="none"><path d="M75.324 150c25.508 0 46.186-20.678 46.186-46.187H29.138c0 25.509 20.678 46.187 46.186 46.187z" fill="url(#A)"/><path d="M94.815 4.661L98.417 0S90.05 2.279 85.069 4.661C81.894 6.18 80.05 7.003 77.23 9.11c-2.859 2.137-4.618 3.366-6.568 6.356s-3.951 8.898-3.951 26.907S57.39 65.89 57.39 65.89s-1.695.848-2.966-.636-1.048-18.432-1.271-19.915-.699-3.467-1.77-5.508c-.97-1.849-2.966-4.449-2.966-4.449s-2.265-2.876-4.237-4.026c-.864-.503-2.331-1.059-2.331-1.059s1.222 2.651 1.695 4.449c.363 1.381.505 2.179.636 3.602.144 1.565.141 2.46 0 4.025-.182 2.02-.608 3.107-1.059 5.085l-2.542 9.534c-1.419 4.846-2.462 7.487-4.025 12.288-1.831 5.622-3.286 8.655-4.661 14.407-1.344 5.623-2.446 10.117-2.754 15.89-.344 6.458-.084 8.508 1.271 14.831l90.466-2.754c.744-5.499.894-9.185.423-15.043-.738-9.194-2.467-14.83-5.857-22.881s-5.509-13.983-18.221-35.381-2.405-33.686-2.405-33.686z" fill="url(#B)"/><path d="M58.025.635s1.055 4.485 1.271 7.415c.269 3.634-.332 7.409-.848 11.017-.423 2.966-.886 4.727 0 8.686.503 2.249 1.907 5.932 1.907 5.932s-7.962-5.085-8.898-11.017 3.208-9.438 4.873-15.466C57.035 4.65 58.025.635 58.025.635z" fill="url(#C)"/><path d="M106.331 107.203c0 17.201-14.195 29.873-30.509 29.026s-29.873-11.825-29.873-29.026 12.673-30.932 29.873-30.932 30.509 13.732 30.509 30.932z" fill="url(#D)"/><path d="M72.116 92.638l1.271-4.237v-1.907s-.635-4.449-13.347.847-7.946 21.557-4.344 23.888 3.351 2.56 5.828 2.807c.906.091 1.442.196 2.331 0 2.463-.542 2.973-2.691 4.237-4.873 2.197-3.79 2.435-10.646 2.435-10.646s.897-3.711 1.59-5.879zm20.232-3.231c.269-.383.212-.551.847-.847s3.524 2.498 4.661 4.873c.841 1.757 1.059 4.873 1.059 4.873s.238 3.046-1.059 4.025c-.503.38-2.119 0-2.119 0s-1.321-1.246-2.119-2.754c-1.146-2.165-1.483-5.72-1.483-5.72s-.693-3.163.212-4.449zm-7.204 7.203s1.121-1.329 2.119-1.483c1.034-.16 1.749.575 2.331 1.483.542.848.558 1.545.424 2.542-.148 1.101-.494 1.914-1.271 2.543a2.77 2.77 0 0 1-3.602 0c-.777-.629-1-1.333-1.059-2.331-.069-1.15 1.059-2.754 1.059-2.754zm5.085 12.439s-.576-3.967.212-4.6c.816-.656 3.39 1.695 4.255 2.398a5.16 5.16 0 0 1 1.638 2.202c.422 1.027.529 1.904.17 2.838a2.77 2.77 0 0 1-3.119 1.8c-.987-.156-1.532-.654-2.083-1.488-.635-.962-1.073-3.15-1.073-3.15z" fill-opacity=".7" fill="#2d00a5"/><defs><linearGradient id="A" x1="75.324" y1="103.813" x2="75.324" y2="150" gradientUnits="userSpaceOnUse"><stop stop-color="#fc4555"/><stop offset="1" stop-color="#fc4055"/></linearGradient><linearGradient id="B" x1="75.284" y1="0" x2="75.284" y2="114.407" gradientUnits="userSpaceOnUse"><stop stop-color="#ffd864"/><stop offset="1" stop-color="#fc4055"/></linearGradient><linearGradient id="C" x1="55.839" y1=".635" x2="55.839" y2="33.686" gradientUnits="userSpaceOnUse"><stop stop-color="#ffd864"/><stop offset="1" stop-color="#fc4055"/></linearGradient><linearGradient id="D" x1="76.14" y1="76.271" x2="76.14" y2="136.269" gradientUnits="userSpaceOnUse"><stop stop-color="#b833e1"/><stop offset="1" stop-color="#4d54e0"/></linearGradient></defs></svg>'),_defineProperty(this,"eye",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"/></svg>'),this.olumVer="{{olumVer}}",this.selector="{{olumSelector}}",this.appMarkup=document.querySelector(this.selector),this.render()}return _createClass(e,[{key:"template",value:function(){return'\n      <div class="DevTool">\n        <div class="DevTool__header">\n          <button type="button" class="DevTool__header--closeBtn">&#10005;</button>\n          <span class="DevTool__header__logo">'.concat(this.logo,'</span>\n          <span class="DevTool__header__version"><i>detected</i> olum@').concat(this.olumVer,'</span>\n        </div>\n        <div class="DevTool__body">').concat(this.root(),'</div>\n      </div>\n      <div class="DevTool__layer"><span></span></div>\n    ')}},{key:"render",value:function(){this.global.olumDevtool=this.devtool.bind(this)}},{key:"removeDevtool",value:function(e,t,o){e&&t&&o&&(e.addEventListener("click",function(){t.remove(),o.remove()}),this.global.addEventListener("popstate",function(){t.remove(),o.remove()}))}},{key:"root",value:function(){var e,n=this;(e=document.createElement("div")).className="DevTool__body__root";var t=this.appMarkup.cloneNode(!0);return t.querySelectorAll("*").forEach(function(e){n.clean(e),e.getAttribute("olum-component")||e.remove()}),this.clean(t),e.append(t),e.querySelectorAll("[olum-component]").forEach(function(e){e.childElementCount&&(e.className="caret");var t='<span class="name">'.concat(e.getAttribute("olum-component"),"</span>"),o=e.getAttribute("olum-view")?'<span class="view">view</span>':"",r='<button type="button" class="scroll" data-name="'.concat(e.getAttribute("olum-component"),'">').concat(n.eye,"</button>"),r='<div class="line">'.concat('<span class="chars">&lt;</span>'+t+'<span class="chars">&gt;</span>'+o+r,"</div>");e.insertAdjacentHTML("afterbegin",r)}),e.outerHTML}},{key:"devtool",value:function(){var t=this;if(!this.appMarkup)return console.warn("olum-devtool - couldn't find application root element via this selector '"+this.selector+"' !");var e,o,r,n=document.querySelector(".DevTool");n||(document.body.insertAdjacentHTML("beforeend",this.template()),(n=document.querySelector(".DevTool"))&&(e=n.querySelector(".DevTool__header--closeBtn"),o=n.querySelector(".DevTool__header"),r=document.querySelector(".DevTool__layer"),e&&o&&r&&(this.center(n),n.addEventListener("click",function(e){return t.toggle(e)}),n.addEventListener("click",function(e){return t.scroll(e)}),this.removeDevtool(e,n,r),o.addEventListener("touchstart",function(e){return t.dragStart(e,n)}),o.addEventListener("mousedown",function(e){return t.dragStart(e,n)}),o.addEventListener("touchmove",function(e){return t.dragMove(e,n)}),o.addEventListener("mousemove",function(e){return t.dragMove(e,n)}),o.addEventListener("mouseup",function(){return t.isDown=!1},this.isActive=!1),o.addEventListener("touchend",function(){return t.isDown=!1},this.isActive=!1),o.addEventListener("mouseleave",function(){return t.isActive=!1}),n.addEventListener("mousemove",function(e){return t.displayLayer(e,r)}))))}},{key:"dragStart",value:function(e,t){e=e||this.global.event,this.isDown=!0,this.isActive=!0,"mousedown"==e.type?(this.startX=e.pageX-t.offsetLeft,this.startY=e.pageY-t.offsetTop):(this.startX=e.touches[0].clientX-t.offsetLeft,this.startY=e.touches[0].clientY-t.offsetTop)}},{key:"dragMove",value:function(e,t){e=e||this.global.event;var o=t.offsetLeft,r=t.offsetTop;this.isDown&&this.isActive&&("mousemove"==e.type?(this.currentX=e.pageX-t.offsetLeft,this.currentY=e.pageY-t.offsetTop):(this.currentX=e.touches[0].clientX-t.offsetLeft,this.currentY=e.touches[0].clientY-t.offsetTop),this.walkX=this.currentX-this.startX,this.walkY=this.currentY-this.startY,o+=this.walkX,r+=this.walkY,t.style.left=o+"px",t.style.top=r+"px")}},{key:"clean",value:function(e){e&&(e.removeAttribute("id"),e.removeAttribute("class"),e.removeAttribute("style"),e=_toConsumableArray(e.childNodes),Array.isArray(e)&&e.length&&e.forEach(function(e){return e.nodeType===Node.TEXT_NODE?e.remove():null}))}},{key:"center",value:function(e){e&&(e.style.left=(this.global.innerWidth-e.offsetWidth)/2+"px",e.style.top=(this.global.innerHeight-e.offsetHeight)/2+"px")}},{key:"toggle",value:function(e){e.target.classList.contains("line")&&e.target.parentElement.classList.contains("caret")&&e.target.parentElement.classList.toggle("active")}},{key:"scroll",value:function(e){e.target.classList.contains("scroll")&&(e=e.target.getAttribute("data-name"),(e=document.querySelector('[olum-component="'.concat(e,'"]')))&&e.scrollIntoView({behavior:"smooth"}))}},{key:"displayLayer",value:function(e,t){var o,r,n,s;e.target.classList.contains("line")?(o=e.target.parentElement.getAttribute("olum-component"),r=(s=document.querySelector('[olum-component="'.concat(o,'"]')).getBoundingClientRect()).left,n=s.top,e=s.width,s=s.height,t.style.width=e+"px",t.style.height=s+"px",t.style.left=r+"px",t.style.top=n+"px",t.querySelector("span").textContent=o,t.style.display="flex"):t.style.display="none"}}]),e}();new(exports.default=DevTool);